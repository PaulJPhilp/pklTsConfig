module TsConfig.Default

import "schema.pkl" as Schema
import "render.pkl" as Render

config = new Schema.CompilerOptionsSchema{
  useBase = true
  useStrict = true
  useStrictest = false
  useDom = true
  useMonorepo = false
  useLibrary = false
  useTranspiling = true
}

root = new Schema.RootSchema {
  files = new Listing {}
  include = new Listing {}
  exclude = new Listing {}
}

amend = new Schema.AmendSchema { }

outputFileName: String = "tsconfig.json"

output {
  files {
    [outputFileName] {
      value = Render.renderTsConfig(config, root, amend)
      renderer = new JsonRenderer {
        converters {
          [Pair] = (pair) ->  List(pair.first, pair.second).join(": ")
        }
      }
      //text = "{\n\"compilerOptions\" : {" + TsConfig.renderTsConfigWithComments(config).dropLast(1) + "\n\t}\n}"
      }
    }
  }